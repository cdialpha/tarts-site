---
import LanguageToggle from "./LanguageToggle.astro"
const currentLang = Astro.url.pathname.startsWith("/fr") ? "fr" : "en";
const navLinks = {
  en: [
    { href: "/", label: "TARTS" },
    { href: "/about", label: "ABOUT" },
    { href: "/resources", label: "RESOURCES" },
    { href: "/projects", label: "PROJECTS" },
  ],
  fr: [
    { href: "/fr", label: "TARTS" },
    { href: "/fr/about", label: "A PROPOS"},
    { href: "/fr/resources", label: "RESSOURCES"},
    { href: "/fr/projects", label: "PROJETS"},
  ],  
}
---

<details class="md:hidden relative group">
  <summary
    class="list-none p-2 cursor-pointer focus:outline-none focus-visible:ring-2 focus-visible:ring-white/80"
    aria-label="Open menu"
  >
    <span class="text-xl">â˜°</span>
  </summary>

  <!-- Backdrop (clicking closes menu) -->
  <div
    class="fixed inset-0 bg-black/40 z-40"
    aria-hidden="true"
    onclick="this.closest('details')?.removeAttribute('open')"
  ></div>

  <!-- Menu panel -->
  <nav
    class="fixed top-0 right-0 z-50 h-full w-72 bg-g3 px-6 py-8 flex flex-col gap-6"
    aria-label="Mobile navigation"
  >
    <a href={currentLang === "en" ? "/" : "/fr"} class="text-xl font-semibold">
      TARTS
    </a>

    <div class="flex flex-col gap-4 text-sm">
      {(currentLang === "en" ? navLinks.en : navLinks.fr)
        .slice(1)
        .map((link) => (
          <a
            href={link.href}
            class={isActive(link.href) ? ACTIVE : INACTIVE}
          >
            {link.label}
          </a>
        ))}
    </div>

    <div class="mt-auto pt-6 border-t border-white/20">
      <LanguageToggle />
    </div>
  </nav>
</details>